# windows 采集usb摄像头数据

https://blog.csdn.net/weixin_37112382/article/details/108472285

先测试下本地有哪些摄像机

```cpp
#include <QCamera>
#include <QApplication>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QList<QCameraInfo> cameras = QCameraInfo::availableCameras();
    QList<QCameraInfo>::iterator cameras_iter = cameras.begin();
    for(;cameras_iter!= cameras.end();cameras_iter++)
        qDebug()<<cameras_iter->deviceName()<<"\n"<<cameras_iter->description();//打印设备名字和描述信息
        qDebug()<<QCameraInfo::defaultCamera().description();//查看系统默认摄像头
    return a.exec();
}
```

没插usb

```cpp
"@device:pnp:\\\\?\\usb#vid_04f2&pid_b67c&mi_00#7&26fcf372&1&0000#{65e8773d-8f56-11d0-a3b9-00a0c9223196}\\global" 
 "Integrated Camera"
```

插了usb

```cpp
"@device:pnp:\\\\?\\usb#vid_04f2&pid_b67c&mi_00#7&26fcf372&1&0000#{65e8773d-8f56-11d0-a3b9-00a0c9223196}\\global" 
 "Integrated Camera"
"@device:pnp:\\\\?\\usb#vid_1b17&pid_0211&mi_00#8&27f9c1ba&1&0000#{65e8773d-8f56-11d0-a3b9-00a0c9223196}\\global" 
 "GENERAL WEBCAM"
```

所以 usb摄像头 的地址是

```cpp
"@device:pnp:\\\\?\\usb#vid_1b17&pid_0211&mi_00#8&27f9c1ba&1&0000#{65e8773d-8f56-11d0-a3b9-00a0c9223196}\\global" 
```

新建摄像头时按如下的方式定义：

```cpp
m_pCamera = new QCamera("@device:pnp:\\\\?\\usb#vid_1b17&pid_0211&mi_00#8&27f9c1ba&1&0000#{65e8773d-8f56-11d0-a3b9-00a0c9223196}\\global");
```



# ui 多媒体界面

`sudo apt-get install libqt5multimedia5-plugins` 



# 配置ffmpeg

https://blog.csdn.net/m0_61745661/article/details/124218248

https://www.jianshu.com/p/5c159d3721d4

将文件放到可执行目录（build）下



# 回放-想法

http://t.csdn.cn/3Ce9K

只能存开机以后的数据。将开机后的照片一张张存入指定文件夹。

要看回放时再用 ffmpeg 将这些图片变为 mp4，再播放出来。



# esp32采集数据



